<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Website Analyzer Results</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'website_analyzer/styles.css' %}">
</head>
<body class="wa-body">
  <main class="wa-shell">
    <section class="wa-card">
      <h1 class="wa-h1">Scan Results</h1>

      {% if page_title %}
        <div class="wa-meta">Title detected: <strong>{{ page_title }}</strong></div>
      {% endif %}
      <div class="wa-meta">URL: <a href="{{ url }}" target="_blank" rel="noopener">{{ url }}</a></div>

      <div class="wa-section">
        <h2 class="wa-h2">General Issues</h2>
        {% if general_issues %}
          <ul class="wa-list">
            {% for item in general_issues %}
              <li>{{ item }}</li>
            {% endfor %}
          </ul>
        {% else %}
          <div class="wa-muted">No major issues detected.</div>
        {% endif %}
      </div>

      <div class="wa-section">
        <h2 class="wa-h2">Recommendations</h2>
        {% if recommendations %}
          <ul class="wa-list">
            {% for rec in recommendations %}
              <li>
                <div class="wa-strong">{{ rec.recommendation }}</div>
                <div class="wa-muted">{{ rec.why }}</div>
                <div class="wa-chip">{{ rec.urgency }}</div>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <div class="wa-muted">No recommendations.</div>
        {% endif %}
      </div>

      <div class="wa-section">
        <h2 class="wa-h2">Headings Found</h2>
        <div class="wa-grid two">
          {% for tag, texts in headings_found.items %}
            <div class="wa-kv">
              <div class="wa-k">{{ tag|upper }}</div>
              <div class="wa-v">
                {% if texts %}
                  <ul class="wa-sublist">
                    {% for t in texts %}
                      <li>{{ t }}</li>
                    {% endfor %}
                  </ul>
                {% else %}
                  <span class="wa-muted">None</span>
                {% endif %}
              </div>
            </div>
          {% endfor %}
        </div>
      </div>

      {% if missing_alt_images %}
      <div class="wa-section">
        <h2 class="wa-h2">Images Missing Alt</h2>
        <ul class="wa-list">
          {% for img in missing_alt_images %}
            <li><a href="{{ img }}" target="_blank" rel="noopener">{{ img }}</a></li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}

      {% if broken_links %}
      <div class="wa-section">
        <h2 class="wa-h2">Broken Links</h2>
        <ul class="wa-list">
          {% for link in broken_links %}
            <li><a href="{{ link }}" target="_blank" rel="noopener">{{ link }}</a></li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}

      {% if layout_suggestions %}
      <div class="wa-section">
        <h2 class="wa-h2">Layout Suggestions (AI)</h2>
        <ul class="wa-list">
          {% for s in layout_suggestions %}
            <li>
              <div class="wa-strong">{{ s.what }}</div>
              <div class="wa-muted">{{ s.why }}</div>
              {% if s.example_link %}
                <a class="wa-mini" href="{{ s.example_link }}" target="_blank" rel="noopener">Example</a>
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}

      <div class="wa-cta">
        <a class="wa-cta-btn" href="{% url 'home' %}">Analyze another site</a>
      </div>
    </section>
  </main>
  <script src="{% static 'website_analyzer/iframe-height.js' %}"></script>
</body>
</html>
