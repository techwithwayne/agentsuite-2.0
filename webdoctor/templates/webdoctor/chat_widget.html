<!-- templates/webdoctor/chat_widget.html -->
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WebDoctor Chat</title>

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Optional: expose CSRF token via meta for scripts that prefer it -->
  <meta name="csrf-token" content="{{ csrf_token }}"/>

  <style>
    body { background-color: #121212; }
  </style>

  <!-- Core CSS from Django static (let your CDN handle it after collectstatic) -->
  <link rel="stylesheet" href="{% static 'webdoctor/css/chat_widget.css' %}?v=0.1.0" />
  <link rel="icon" href="data:,">
</head>
<body
  id="webdoctor-root"
  data-handle-message="/agent/handle_message/"
  data-submit-form="/agent/submit_form/"
  data-reset-url="/agent/reset_conversation/"
>
  <div class="chat-widget">
    <div id="chat-header">WebDoctor AI Assistant - Shirley</div>

    <div class="chat-body" id="chat-body">
      <!-- Messages will be dynamically added here -->
    </div>

    <div class="chat-input-wrapper">
      <input
        type="text"
        id="user-input"
        placeholder="Describe your website issue..."
        maxlength="500"
      />
      <button id="send-button" type="button">âž¤</button>
    </div>

    <div class="form-section" id="form-section">
      <input type="text" id="form-name" placeholder="Your Name" maxlength="100" />
      <input type="email" id="form-email" placeholder="Your Email" maxlength="100" />
      <button id="submit-button" type="button">Get Free Diagnostic Report</button>
    </div>
  </div>

  <!-- Order matters: bootstrap -> reset -> widget -->
  <script defer src="{% static 'webdoctor/js/chat_bootstrap.js' %}?v=0.1.0"></script>
  <script defer src="{% static 'webdoctor/js/reset_conversation.js' %}?v=0.1.0"></script>
  <script defer src="{% static 'webdoctor/js/chat_widget.js' %}?v=0.1.0"></script>
</body>
</html>
